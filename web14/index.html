<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<title>Cristales</title>

<!-- Fuentes -->
<link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,700;1,400&display=swap" rel="stylesheet">

<style>
  body{
      font-family: 'Merriweather', serif;
      font-weight: 700;
      display:flex;
      flex-direction:column;
      justify-content:flex-start;
      align-items:center;
      min-height:100vh;
      margin:0;
      background-image: url("img/fondo.png");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      padding-top: 40px;
  }

  .titulo {
    position: absolute;
    top: 32px;
    left: 20px;
    color: #fff;
    font-family: 'Cinzel Decorative', serif;
    font-weight: 700;
    font-size: 2rem;
  }

  #tituloPrincipal {
    margin: 60px 0 10px 0;
    text-align: center;
    font-size: 1.5rem;
    color:#fff;
  }

  #tituloCristal {
    font-family: 'Merriweather', serif;
    font-weight: 700;
    color:#fff;
    margin: 60px 0 20px 0;
    text-align:center;
    font-size:2rem;
    display:none;
  }

  /* Texto final desbloqueado */
  #textoFinal {
    display: none;
    color: #fff;
    font-size: 1.3rem;
    font-style: italic;
    margin-top: 10px;
    text-decoration: underline;
    cursor: pointer;
    animation: palpitar 1.4s infinite ease-in-out;
    transform-origin: center;
    opacity: 0;
    transition: opacity 1s ease;
  }

  #textoFinal.mostrar {
    display: block;
    opacity: 1;
  }

  #textoFinal:hover {
    color: #E9CE99;
  }

  /* Efecto de palpitar */
  @keyframes palpitar {
    0%,100% { transform: scale(1); }
    50% { transform: scale(1.18); }
  }

  .contenedor{
    position:relative;
    width:100%;
    max-width:1000px;
    flex:1;
    display:flex;
    align-items:center;
    justify-content:center;
    margin-top:20px;
  }

  .grilla {
    position:relative;
    width:100%;
    height:500px;
    display:flex;
    align-items:center;
    justify-content:center;
  }
  .grilla.oculto { display:none; }

  .cristalCaja {
    position:absolute;
    width: clamp(90px, 14vw, 180px);
    aspect-ratio:1/1;
    display:flex;
    align-items:center;
    justify-content:center;
    transition: all 0.4s ease;
    opacity:1;
    cursor:pointer;
  }

  .cristalCaja img{
    width:100%;
    height:100%;
    object-fit:contain;
    pointer-events:none;
    transition: transform 0.4s ease;
  }

  .cristalCaja.inhabilitado { pointer-events:none; cursor:default; }

  .izq-arriba   { top:20%; left:25%; transform:translate(-50%,-50%); }
  .izq-abajo    { top:70%; left:25%; transform:translate(-50%,-50%); }
  .centro       { top:45%; left:50%; transform:translate(-50%,-50%); width: clamp(120px, 18vw, 240px); }
  .der-arriba   { top:20%; left:75%; transform:translate(-50%,-50%); }
  .der-abajo    { top:70%; left:75%; transform:translate(-50%,-50%); }

  .palpitando {
    animation: palpitar 1.3s infinite ease-in-out;
    transform-origin:center;
  }

  .detalleCristal {
    display:none;
    width:100%;
    max-width:900px;
    align-items:center;
    justify-content:center;
    gap:40px;
  }
  .detalleCristal.visible { display:flex; }

  .textoCampo {
    max-width: auto;
    padding: 20px;
    font-size: 24px;
    color: #ffff;
    line-height: 1.6;
    font-family: 'Merriweather', serif;
    font-weight: 400;
    font-style: italic;
  }

  .cristal-grande {
    width: clamp(420px, 25vw, 380px);
    height: clamp(420px, 20vw, 320px);
    flex-shrink:0;
    cursor:pointer;
  }

  .cristal-grande img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    animation: brilloPulse 2s infinite ease-in-out;
  }

  @keyframes brilloPulse {
    0% { filter: drop-shadow(0 0 10px #E9CE99); }
    50% { filter: drop-shadow(0 0 15px #E9CE99); }
    100% { filter: drop-shadow(0 0 10px #E9CE99); }
  }
</style>
</head>
<body>

  <div class="titulo">Mortalis</div>

  <h1 id="tituloPrincipal">FAMILIA DE CRISTALES</h1>
  <!-- Texto que se desbloquea -->
  <div id="textoFinal" onclick="window.location.href= 'https://www.instagram.com/elowen_selen' ">
    ✧ Descubrir el legado completo ✧
  </div>

  <h1 id="tituloCristal"></h1>

  <div class="contenedor">
    <div class="grilla" id="grilla">

      <div id="cVioleta" class="cristalCaja izq-arriba inhabilitado">
        <img src="img/cristales/cristalvioleta.png"
             data-disabled="img/cristales/cristalvioletabyn.png"
             data-NombreCristal="Amatista">
      </div>

      <div id="cRosa" class="cristalCaja izq-abajo">
        <img src="img/cristales/cristalrosa.png"
             data-disabled="img/cristales/cristalrosabyn.png"
             data-NombreCristal="Rodonita"
             class="palpitando">
      </div>

      <div id="cCeleste" class="cristalCaja centro inhabilitado">
        <img src="img/cristales/cristalceleste.png"
             data-disabled="img/cristales/cristalcelestebyn.png"
             data-NombreCristal="Cristal de Selen">
      </div>

      <div id="cAmarillo" class="cristalCaja der-arriba inhabilitado">
        <img src="img/cristales/cristalamarillo.png"
             data-disabled="img/cristales/cristalamarillobyn.png"
             data-NombreCristal="Citrino">
      </div>

      <div id="cVerde" class="cristalCaja der-abajo inhabilitado">
        <img src="img/cristales/cristalverde.png"
             data-disabled="img/cristales/cristalverdebyn.png"
             data-NombreCristal="Jade">
      </div>
    </div>

    <div class="detalleCristal" id="detalleCristal"></div>
  </div>

<script>
  const arrayCristal = ['cRosa','cVioleta','cVerde','cAmarillo','cCeleste'];
  const activacion = new Set(['cRosa']);
  let IdentidadCristal = null;
  let ultimoRevisado = null;

  document.querySelectorAll(".cristalCaja.inhabilitado img").forEach(img => {
    if(img.dataset.disabled){
      img.dataset.enabled = img.src;
      img.src = img.dataset.disabled;
    }
  });

  function activate(id){
    const cristalCaja = document.getElementById(id);
    if(!cristalCaja || !cristalCaja.classList.contains('inhabilitado')) return;
    cristalCaja.classList.remove('inhabilitado');
    const img = cristalCaja.querySelector('img');
    if(img && img.dataset.enabled){ img.src = img.dataset.enabled; }
    if(img) img.classList.add('palpitando');
    activacion.add(id);
  }

  const tituloPrincipal = document.getElementById("tituloPrincipal");
  const tituloCristal   = document.getElementById("tituloCristal");
  const textoFinal = document.getElementById("textoFinal");

  arrayCristal.forEach(id => {
    const cristalCaja = document.getElementById(id);
    if(!cristalCaja) return;

    cristalCaja.addEventListener('click', () => {
      if(cristalCaja.classList.contains('inhabilitado')) return;

      const grilla = document.getElementById("grilla");
      const detalleCristal = document.getElementById("detalleCristal");

      if(IdentidadCristal === id){
        IdentidadCristal = null;
        detalleCristal.classList.remove("visible");
        detalleCristal.innerHTML = "";
        grilla.classList.remove("oculto");
        tituloPrincipal.style.display = "block";
        tituloCristal.style.display = "none";

        // Si terminó de ver el último cristal y volvió a la pantalla principal
        if(id === 'cCeleste' && activacion.size === arrayCristal.length){
          textoFinal.classList.add("mostrar");
        }

      } else {
        IdentidadCristal = id;
        ultimoRevisado = id;
        grilla.classList.add("oculto");
        detalleCristal.classList.add("visible");
        detalleCristal.innerHTML = "";

        const nombreCristal = cristalCaja.querySelector("img").getAttribute("data-NombreCristal") || "Cristal";
        tituloPrincipal.style.display = "none";
        tituloCristal.textContent = nombreCristal;
        tituloCristal.style.display = "block";

        const CristalGrande = document.createElement("div");
        CristalGrande.className = "cristal-grande";
        const img = cristalCaja.querySelector("img");
        CristalGrande.innerHTML = `<img src="${img.src}" alt="">`;

        CristalGrande.addEventListener("click", () => {
          IdentidadCristal = null;
          detalleCristal.classList.remove("visible");
          detalleCristal.innerHTML = "";
          grilla.classList.remove("oculto");
          tituloPrincipal.style.display = "block";
          tituloCristal.style.display = "none";

          // Chequeo nuevamente aquí por si se cerró desde la imagen
          if(id === 'cCeleste' && activacion.size === arrayCristal.length){
            textoFinal.classList.add("mostrar");
          }
        });

        const CristalCampoTexto = document.createElement("div");
        CristalCampoTexto.className = "textoCampo";
        switch(id){
          case "cRosa":    
            CristalCampoTexto.innerHTML="<small>Aquellas personas que llevan este cristal suelen irradiar una energía positiva, lo que les permite afrontar los desafíos de la vida con calma y equilibrio. Su vibración está estrechamente asociada con la creatividad y la capacidad de ver el mundo desde perspectivas distintas. Este cristal conecta con linajes familiares en los que la sensibilidad, la intuición y la inventiva han estado siempre presentes.</small>"; 
            break;
          case "cVioleta": 
            CristalCampoTexto.innerHTML="<small>Esta piedra simboliza a las personas serenas, las que encuentran equilibrio  medio del caos. Su energía transmite calma y confianza. Está profundamente conectada con la intuición, potenciando la capacidad de percibir lo que no siempre se ve a simple vista. Quienes la llevan suelen guiarse por su instinto de manera natural.</small>"; 
            break;
          case "cVerde":   
            CristalCampoTexto.innerHTML="<small>Se trata de una piedra sagrada y armónica, su vibración conecta profundamente con la tierra y el equilibrio universal. Su energía transmite serenidad y respeto por todo lo vivo, recordando la importancia de mantener una relación consciente con la naturaleza. Proveniente de una familia con una gran conexión con el mundo natural, guarda en su interior la memoria de la tierra, los ríos y los bosques. Quienes la portan suelen sentir una afinidad especial por los entornos verdes.</small>"; 
            break;
          case "cAmarillo":
            CristalCampoTexto.innerHTML="<small>Esta piedra es la compañera ideal para quienes llevan dentro un espíritu ambicioso y perseverante, siempre en busca del éxito. Su energía actúa como un impulso constante hacia las metas, recordando que la confianza y la disciplina son claves para alcanzar los sueños más grandes. Proveniente de una tradición optimista y alegre, transmite entusiasmo y vitalidad a quienes la portan.</small>"; 
            break;
          case "cCeleste": 
            CristalCampoTexto.innerHTML="<small>Tras su fallecimiento, la piedra se ha convertido en un símbolo de su esencia y en un recordatorio vivo de todo lo que dejó a su pueblo. Su energía está entrelazada con la de Selen, como si en su interior quedara grabada su fuerza vital. Para la comunidad, representa la memoria de su legado: salud, prosperidad y la inspiración de una vida guiada por la armonía con la tierra.</small>"; 
            break;
        }
        detalleCristal.appendChild(CristalGrande);
        detalleCristal.appendChild(CristalCampoTexto);

        // Quitar animación al cristal usado
        const imgUsado = cristalCaja.querySelector("img");
        imgUsado.classList.remove("palpitando");

        // Activar siguiente cristal
        const indiceCristal = arrayCristal.indexOf(id);
        const siguienteID = arrayCristal[indiceCristal + 1];
        if(siguienteID && !activacion.has(siguienteID)){ activate(siguienteID); }
      }
    });
  });
</script>
</body>
</html>
